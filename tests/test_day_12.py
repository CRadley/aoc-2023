import pytest
from d12 import valid_arrangements


@pytest.mark.parametrize(
    "s,r,e",
    [
        ("???.###", (1, 1, 3), 1),
        (".??..??...?##.", (1, 1, 3), 4),
        ("?#?#?#?#?#?#?#?", (1, 3, 1, 6), 1),
        ("????.#...#...", (4, 1, 1), 1),
        ("????.######..#####.", (1, 6, 5), 4),
        ("?###????????", (3, 2, 1), 10),
        (
            "???.###????.###????.###????.###????.###",
            (1, 1, 3, 1, 1, 3, 1, 1, 3, 1, 1, 3, 1, 1, 3),
            1,
        ),
    ],
)
def test_day_12(s, r, e):
    assert valid_arrangements(s, r, 0) == e
